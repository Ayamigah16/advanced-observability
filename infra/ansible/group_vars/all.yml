jenkins_plugins:
- workflow-aggregator
- git
- credentials-binding
- docker-workflow
- ssh-agent
- matrix-auth
- matrix-project
- ws-cleanup
- dependency-check-jenkins-plugin

jenkins_admin_user: admin
jenkins_http_port: 8080
jenkins_admin_password: "{{ vault_jenkins_admin_password }}"

# ---------------------------------------------------------------------------
# Monitoring stack (Prometheus + Alertmanager + Grafana + Node Exporter)
# Secrets are loaded from group_vars/all/vault.yml (ansible-vault encrypted)
# ---------------------------------------------------------------------------
prometheus_version: "2.50.1"
prometheus_retention_time: "15d"
alertmanager_version: "0.27.0"
node_exporter_version: "1.7.0"

grafana_admin_user: admin
grafana_admin_password: "{{ vault_grafana_admin_password }}"

alertmanager_slack_webhook_url: "{{ vault_alertmanager_slack_webhook_url }}"
alertmanager_slack_channel_warning: "#alerts-warning"
alertmanager_slack_channel_critical: "#alerts-critical"
alertmanager_smtp_from: "alerts@example.com"
alertmanager_smtp_smarthost: "smtp.example.com:587"
alertmanager_smtp_username: "{{ vault_alertmanager_smtp_username }}"
alertmanager_smtp_password: "{{ vault_alertmanager_smtp_password }}"
alertmanager_email_oncall: "oncall@example.com"

# Scrape target: private IP of the deploy/app EC2 host (set from .env or inventory)
prometheus_scrape_app_host: "{{ lookup('env', 'DEPLOY_HOST_IP') }}"
prometheus_scrape_app_port: 80
prometheus_scrape_node_exporter_host: "{{ lookup('env', 'DEPLOY_HOST_DNS') }}"
prometheus_scrape_node_exporter_port: 9100

alert_error_rate_threshold: 5
alert_latency_p95_threshold: 0.5
alert_cpu_threshold: 80

# ---------------------------------------------------------------------------
# AWS / CloudWatch
# ---------------------------------------------------------------------------
aws_region: "{{ lookup('env', 'AWS_REGION') }}"
cloudwatch_log_group: /docker/secure-flask-app
